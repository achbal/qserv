# -*- python -*-
# Build test programs for qserv query package
Import('env')
Import('libProducts')
Import('defaultTgts')
Import('findLibs')
Import('cacheObjs')

import os
import itertools


programs = []
# extDeps
extDeps = "antlr boost_thread".split()

modDeps = 'global log'.split() # deps on other modules
deps = itertools.chain(*map(lambda m: defaultTgts[m], modDeps))
deps = map(lambda s: s, deps) # unchain
deps.sort(key=str)
##qtObj = env.Object('../qana/QueryTemplate.cc') ## FIXME
localdeps = map(env.Object, libProducts['query'])
p = env.Program(['testRepr.cc', ] + localdeps + deps,
                LIBS=findLibs(extDeps))
programs.append(p)

Return('programs')
